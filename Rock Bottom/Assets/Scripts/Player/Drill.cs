using UnityEngine;

public class Drill : MonoBehaviour
{
    private float digDuration = 0;
    private float digTimer = 0f;
    [SerializeField] private float baseDigTime = 5f;
    public void OnTriggerStay2D(Collider2D collision)
    {
        if (digDuration <= 0f)
        {
            digDuration = Mathf.Max(0.1f, baseDigTime - PlayerStats.Instance.MoveSpeed);
        }

        if (digTimer < digDuration)
        {
            digTimer += Time.fixedDeltaTime;
        }
        else
        {
            // call the Dig() method on the object being collided with
            digTimer = 0f;
            digDuration = 0f;
        }
    }

    // Reset dig timer when player exits collision
    public void OnTriggerExit2D(Collider2D collision)
    {
        digTimer = 0f;
        digDuration = 0f;
    }
}